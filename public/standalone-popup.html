<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservation Popup</title>
    <style>
        /* Reset and base styles */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: transparent;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        /* Floating Action Button */
        .fab-container {
            position: fixed;
            bottom: 24px;
            right: 24px;
            pointer-events: auto;
            z-index: 10000;
        }

        .fab-button {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: #191919;
            color: #EFE7D2;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .fab-button:hover {
            background: rgba(25,25,25,0.9);
            transform: scale(1.05);
            box-shadow: 0 12px 24px rgba(0,0,0,0.4);
        }

        .fab-button.active {
            background: #e54d2e;
        }

        .fab-button.active:hover {
            background: rgba(229,77,46,0.9);
        }

        .fab-emoji {
            margin-right: 8px;
            font-size: 18px;
        }

        /* Popup Container */
        .popup-container {
            position: fixed;
            bottom: 100px;
            right: 24px;
            width: 414px;
            height: 600px;
            background: #000;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
            border: 1px solid rgba(255,255,255,0.15);
            overflow: hidden;
            transform: scale(0);
            opacity: 0;
            transition: all 0.3s ease;
            transform-origin: bottom right;
            pointer-events: auto;
            z-index: 10001;
        }

        .popup-container.open {
            transform: scale(1);
            opacity: 1;
        }

        /* Popup Header */
        .popup-header {
            background: #191919;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #EFE7D2;
        }

        .popup-title {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .popup-title .emoji {
            font-size: 18px;
        }

        .popup-title .text {
            font-weight: 600;
        }

        .popup-close {
            width: 24px;
            height: 24px;
            border: none;
            background: none;
            color: #EFE7D2;
            cursor: pointer;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: background 0.2s ease;
        }

        .popup-close:hover {
            background: rgba(255,255,255,0.1);
        }

        /* Popup Content */
        .popup-content {
            height: 536px;
            overflow-y: auto;
            padding: 16px;
            color: #EFE7D2;
            background: #000;
        }

        .popup-content::-webkit-scrollbar {
            width: 6px;
        }

        .popup-content::-webkit-scrollbar-track {
            background: #2a2a2a;
        }

        .popup-content::-webkit-scrollbar-thumb {
            background: #666;
            border-radius: 3px;
        }

        .popup-content::-webkit-scrollbar-thumb:hover {
            background: #888;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
            color: #EFE7D2;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            background: #2a2a2a;
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 8px;
            color: #EFE7D2;
            font-size: 14px;
        }

        .form-input:focus {
            outline: none;
            border-color: #644a40;
        }

        .form-button {
            width: 100%;
            padding: 12px;
            background: #644a40;
            color: #EFE7D2;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .form-button:hover {
            background: rgba(100,74,64,0.9);
        }

        .form-button:disabled {
            background: #444;
            cursor: not-allowed;
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .popup-container {
                right: 16px;
                bottom: 80px;
                width: calc(100vw - 32px);
                max-width: 400px;
            }
            
            .fab-container {
                right: 16px;
                bottom: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Action Button -->
    <div class="fab-container">
        <button class="fab-button" id="fabButton">
            <span class="fab-emoji">üçΩÔ∏è</span>
            <span id="fabText">R√©server une table</span>
        </button>
    </div>

    <!-- Popup Container -->
    <div class="popup-container" id="popupContainer">
        <div class="popup-header">
            <div class="popup-title">
                <span class="emoji">üçΩÔ∏è</span>
                <span class="text">ochel</span>
            </div>
            <button class="popup-close" id="closeButton">√ó</button>
        </div>
        <div class="popup-content">
            <div id="formContainer">
                <h3 style="margin-bottom: 16px; text-align: center;">R√©servez votre table</h3>
                
                <form id="reservationForm">
                    <div class="form-group">
                        <label class="form-label">Nom complet</label>
                        <input type="text" class="form-input" name="name" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">T√©l√©phone</label>
                        <input type="tel" class="form-input" name="phone" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-input" name="date" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Heure</label>
                        <select class="form-input" name="time" required>
                            <option value="">S√©lectionnez une heure</option>
                            <option value="18:00">18:00</option>
                            <option value="18:30">18:30</option>
                            <option value="19:00">19:00</option>
                            <option value="19:30">19:30</option>
                            <option value="20:00">20:00</option>
                            <option value="20:30">20:30</option>
                            <option value="21:00">21:00</option>
                            <option value="21:30">21:30</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Nombre de personnes</label>
                        <select class="form-input" name="guests" required>
                            <option value="">S√©lectionnez</option>
                            <option value="1">1 personne</option>
                            <option value="2">2 personnes</option>
                            <option value="3">3 personnes</option>
                            <option value="4">4 personnes</option>
                            <option value="5">5 personnes</option>
                            <option value="6">6 personnes</option>
                            <option value="7">7 personnes</option>
                            <option value="8">8 personnes</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Demande sp√©ciale (optionnel)</label>
                        <textarea class="form-input" name="notes" rows="3" placeholder="Allergies, c√©l√©bration, pr√©f√©rences..."></textarea>
                    </div>
                    
                    <button type="submit" class="form-button" id="submitButton">
                        Confirmer la r√©servation
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Popup functionality
        const fabButton = document.getElementById('fabButton');
        const fabText = document.getElementById('fabText');
        const popupContainer = document.getElementById('popupContainer');
        const closeButton = document.getElementById('closeButton');
        const reservationForm = document.getElementById('reservationForm');
        const submitButton = document.getElementById('submitButton');
        
        let isOpen = false;
        
        function togglePopup() {
            isOpen = !isOpen;
            popupContainer.classList.toggle('open', isOpen);
            fabButton.classList.toggle('active', isOpen);
            fabText.textContent = isOpen ? 'Fermer' : 'R√©server une table';
        }
        
        function closePopup() {
            isOpen = false;
            popupContainer.classList.remove('open');
            fabButton.classList.remove('active');
            fabText.textContent = 'R√©server une table';
        }
        
        // Event listeners
        fabButton.addEventListener('click', togglePopup);
        closeButton.addEventListener('click', closePopup);
        
        // Close popup when clicking outside
        document.addEventListener('click', function(e) {
            if (isOpen && !popupContainer.contains(e.target) && !fabButton.contains(e.target)) {
                closePopup();
            }
        });
        
        // Form submission
        reservationForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            
            submitButton.textContent = 'Envoi en cours...';
            submitButton.disabled = true;
            
            try {
                // Replace with your actual API endpoint
                const response = await fetch('https://ochelreservationv2-e795sue0b-sahid013s-projects.vercel.app/api/send-email', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    document.getElementById('formContainer').innerHTML = `
                        <div style="text-align: center; padding: 40px 20px;">
                            <div style="font-size: 48px; margin-bottom: 16px;">‚úÖ</div>
                            <h3 style="margin-bottom: 16px; color: #6bf167;">R√©servation confirm√©e!</h3>
                            <p style="margin-bottom: 24px; color: #b4b4b4;">
                                Merci ${data.name}! Votre r√©servation pour ${data.guests} personne(s) 
                                le ${data.date} √† ${data.time} est confirm√©e.
                            </p>
                            <button class="form-button" onclick="location.reload()">
                                Faire une nouvelle r√©servation
                            </button>
                        </div>
                    `;
                } else {
                    throw new Error('Erreur lors de la r√©servation');
                }
            } catch (error) {
                alert('Erreur lors de la r√©servation. Veuillez r√©essayer.');
                submitButton.textContent = 'Confirmer la r√©servation';
                submitButton.disabled = false;
            }
        });
        
        // Set minimum date to today
        const dateInput = document.querySelector('input[name="date"]');
        if (dateInput) {
            const today = new Date().toISOString().split('T')[0];
            dateInput.min = today;
        }
    </script>
</body>
</html>